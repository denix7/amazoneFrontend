<div class="site-wrap" *ngIf="product">
    <div class="bg-light py-3">
      <div class="container">
        <div class="row">
          <div *ngIf="data.message">
              <app-message></app-message>
          </div>
          <div class="col-md-12 mb-0"><a href="index.html">Home</a> <span class="mx-2 mb-0">/</span> <strong class="text-black">Tank Top T-Shirt</strong></div>
        </div>
      </div>
    </div>  

    <div class="site-section">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <img src="{{'http://localhost:3030/api/seller/products/get-image/' + product.image}}" alt="Image" class="img-fluid">
          </div>
          
          <div class="col-md-6">
            <h2 class="text-black">{{product.name}}</h2>
            <ngb-rating [(rate)]="product.averageRating" [starTemplate]="t" [readonly]="true" max="5"></ngb-rating>
            
            <p>{{product.description}}</p>
            <p class="mb-4"><strong>Porpietario:</strong> {{product.owner.name}}</p>
            <p class="mb-4"><strong>Categoria:</strong> {{product.category.name}}</p>
            <p><strong class="text-primary h4">${{product.price}}</strong></p>
            <div class="mb-5">
              <div class="input-group mb-3" style="max-width: 120px;">
              <div class="input-group-prepend">
                <button class="btn btn-outline-primary js-btn-minus" type="button">-</button>
              </div>
              <input type="text" class="form-control text-center" value="1" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">
              <div class="input-group-append">
                <button class="btn btn-outline-primary js-btn-plus" type="button">+</button>
              </div>
            </div>

            </div>
            <p><a class="buy-now btn btn-sm btn-primary" (click)="addToCart()">Add To Cart</a></p>


            <ng-template #t let-fill="fill">
              <span *ngIf="fill === 100" class="star full">&#9733;</span>
              <span *ngIf="fill === 0" class="star">&#9733;</span>
              <span *ngIf="fill < 100 && fill > 0" class="star">
                <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
              </span>
            </ng-template>

          </div>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row">
        <div class="col-md-12">
          <h4 class="text-black">Reviews</h4>
          
          <div class="reviews">
            <div *ngFor="let review of product.reviews" class="review">
              <div class="p-3">
                <img [src]="review.owner.image" alt="poster" width="75px" class="rounded-circle">
                <p class="lead d-inline ml-3">{{review.owner.name}}</p>
                
                <ngb-rating [(rate)]="review.rating" [starTemplate]="t" [readonly]="true" max="5"></ngb-rating>
                <p class="ml-2 d-inline font-weight-bold">{{review.title}}</p>
                <p class="mt-3">{{review.description}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-8">
          <div class="card bg-light my-5">
            <div class="card-body">
              <h4 class="card-title">Add a review</h4>
              
              <div class="form">
                <div class="form-group">
                  <label for="">Title</label>
                  <input type="text" name="title" class="form-control" [(ngModel)]="myReview.title">
                </div>
                
                <div class="form-group">
                  <label for="">Description</label>
                  <input type="text" name="title" class="form-control" [(ngModel)]="myReview.description">
                </div>
                
                <div class="form-group">
                  <label for="">Calificacion</label>
                  <ngb-rating [(rate)]="myReview.rating" [starTemplate]="t" [readonly]="false" max="5"></ngb-rating>
                </div>
                
                <button type="button" class="btn btn-info" (click)="postReview()">Crear review</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>